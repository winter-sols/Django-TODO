{% extends 'todos/base.html' %}

{% block title %}
<title>Todo list</title>
{% endblock %}

{% block content %}
<div class="container">
  <!-- title row -->
  <div class="row">
    <div class="page-header offset-md-5">
      <h1>
        Todo List
      </h1>
    </div>
  </div>
  <!-- Add a todo row -->
  <div class="row">
    <form method="post" action="{% url 'todos:add' %}" class="offset-sm-3 col-lg-12">
      {% csrf_token %}
      <div class="form-row">
        <div class="col-md-6">
          <input type="text" class="form-control" name="title" placeholder="Do laundry" required>
        </div>
        <div class="col-md-6">
          <button type="submit" name="submit" class="btn btn-outline-primary">
            Add
          </button>
        </div>
      </div>
    </form>
  </div>
  <hr />
  <!-- todo list row -->
  <div class="row">
    <div class="list-group offset-md-2 col-lg-9">
      {% for todo in todo_list %}
      <div class="list-group-item {% if todo.isCompleted %} todo-complete {% endif %}">
        <form style="display: inline;" method="post" action="{% url 'todos:update' todo.id %}">
          {% csrf_token %}
          <input type="checkbox" name="isCompleted" onchange="this.form.submit()" {% if todo.isCompleted %} checked
            {% endif %} class="todo-status-checkbox"
            title="{% if not todo.isCompleted %} mark as done {% else %} mark undone {% endif %}">
        </form>
        {{ todo.title }}
        <a href="{% url 'todos:delete' todo.id %}" title="Delete">
          <i class="far fa-trash-alt"></i>
        </a>
      </div>
      {% endfor %}
    </div>
  </div>
</div>

{% endblock %}